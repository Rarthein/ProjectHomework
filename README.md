# Проект "МойВиджет"

## Описание

Этот проект предоставляет функции для маскирования номеров банковских карт и счетов, а также преобразования даты в
нужный формат. Основная цель заключается в обеспечении безопасности и удобного представления данных, связанных с
банковскими операциями.

## Функции

### Модуль masks.py

- get_mask_card_number

Функция принимает номер карты в виде целого числа и возвращает его замаскированную версию в формате 1234 56** **** 5678.
Если номер карты не состоит из 16 цифр, функция возвращает сообщение об ошибке: "Номер карты должен состоять из 16
цифр".

- get_mask_account

Функция принимает номер счета в виде целого числа и возвращает его замаскированную версию в формате **XXXX, где XXXX —
последние четыре цифры номера счета. Если номер счета не состоит из 16 до 20 цифр, функция возвращает сообщение об
ошибке: "Номер счета должен быть от 16 до 20 цифр".

### Модуль processing.py

- filter_by_state

Функция фильтрует список банковских операций, возвращая только те операции, которые имеют указанное состояние. По
умолчанию, фильтрация происходит по состоянию "EXECUTED".

- sort_by_date

Функция сортирует список словарей с банковскими данными по дате. Сортировка может быть выполнена в прямом или обратном
порядке.

### Модуль widget.py

- mask_account_card

Функция предназначена для маскирования номера карты или счета, полученного в виде строки. Она определяет тип данных (
карта или счет) и возвращает замаскированный номер. Если входные данные не соответствуют ожидаемому формату, функция
возвращает сообщение об ошибке.

- get_date

Функция преобразует дату, полученную в формате YYYY-MM-DDTHH:MM:SS.ssssss, в формат DD.MM.YYYY. Если входная дата не
соответствует ожидаемому формату, функция возвращает сообщение об ошибке.

### Модуль generators.py

Модуль включает следующие функции:

- filter_by_currency

Фильтрует список транзакций по указанному коду валюты и возвращает соответствующие транзакции.

- transaction_descriptions

Возвращает описания из списка транзакций.

- card_number_generator

Генерирует отформатированные номера карт для указанного диапазона чисел.

## Примеры использования

transactions = [{"id": 939719570, "state": "EXECUTED", "date": "2018-06-30T02:08:58.425572",
"operationAmount": {"amount": "9824.07", "currency": {"name": "USD", "code": "USD"}},
"description": "Перевод организации", "from": "Счет 75106830613657916952",
"to": "Счет 11776614605963066702"},
{"id": 142264268, "state": "EXECUTED", "date": "2019-04-04T23:20:05.206878",
"operationAmount": {"amount": "79114.93", "currency": {"name": "USD", "code": "USD"}},
"description": "Перевод со счета на счет", "from": "Счет 19708645243227258542",
"to": "Счет 75651667383060284188"},
{"id": 873106923, "state": "EXECUTED", "date": "2019-03-23T01:09:46.296404",
"operationAmount": {"amount": "43318.34", "currency": {"name": "руб.", "code": "RUB"}},
"description": "Перевод со счета на счет", "from": "Счет 44812258784861134719",
"to": "Счет 74489636417521191160"},
{"id": 895315941, "state": "EXECUTED", "date": "2018-08-19T04:27:37.904916",
"operationAmount": {"amount": "56883.54", "currency": {"name": "USD", "code": "USD"}},
"description": "Перевод с карты на карту", "from": "Visa Classic 6831982476737658",
"to": "Visa Platinum 8990922113665229"},
{"id": 594226727, "state": "CANCELED", "date": "2018-09-12T21:27:25.241689",
"operationAmount": {"amount": "67314.70", "currency": {"name": "руб.", "code": "RUB"}},
"description": "Перевод организации", "from": "Visa Platinum 1246377376343588",
"to": "Счет 14211924144426031657"},
{"id": 987654321, "state": "", "date": "2020-05-01T10:15:30.123456",
"operationAmount": {"amount": "1234.56", "currency": {"name": "EUR", "code": "EUR"}},
"description": "Оплата услуг",
"from": "Счет 123456789", "to": "Счет 987654321"}]

## Тестирование

Для тестирования функций используется pytest. Тесты организованы с использованием фикстур и параметризации.
Используемые тесты:
Фикстуры: Предоставляют предварительно определенные наборы данных для тестирования функций в каждом модуле.
Параметризованные тесты: Проверяют функции на различных тестовых данных, включая как корректные, так и некорректные
случаи.

### Модуль тестирования функций обработки масок

В этом модуле мы тестируем функции get_mask_account и get_mask_card_number из модуля src.masks. Эти функции применяют
маски к номерам банковских счетов и карт. Функция get_mask_account применяет маску к номеру банковского счета. Если
длина номера счета не соответствует требованиям (от 16 до 20 цифр), функция возвращает сообщение об ошибке.Функция
get_mask_card_number применяет маску к номеру банковской карты. Если длина номера карты не равна 16 цифрам, функция
возвращает сообщение об ошибке. Мы используем параметризованные тесты и фикстуры для проверки различных вариантов
входных
данных.

### Модуль тестирования функций обработки данных

В этом модуле мы тестируем функции filter_by_state и sort_by_date из модуля src.processing. Эти функции фильтруют и
сортируют данные о банковских операциях. Функция filter_by_state фильтрует список операций по указанному статусу.Функция
sort_by_date сортирует список операций по дате. Мы проводим тесты с различными значениями параметра reverse для проверки
корректности сортировки в прямом и обратном порядке.

### Модуль тестирования функций виджета

В этом модуле мы тестируем функции get_date и mask_account_card из модуля src.widget. Функция get_date преобразует дату и
время из формата ISO 8601 в формат "дд.мм.гггг". Функция mask_account_card применяет маску к номеру банковского счета или
карты, предварительно проверяя корректность ввода. Мы используем параметризованные тесты и фикстуры для проверки
различных вариантов входных данных.

### Модуль тестирования генераторных функций

- filter_by_currency(sample_transactions, currency, expected_count):

Эта функция фильтрует список транзакций по заданной валюте. Функция pytest.mark.parametrize используется для
тестирования функции с различными входными данными. В данном случае, функция тестируется с тремя различными валютами:
USD, EUR и GBP. Набор тестовых данных состоит из списка транзакций и ожидаемого количества транзакций для каждой валюты.

- test_transaction_descriptions(transactions, expected_descriptions):

Эта функция возвращает список описаний транзакций. Она также тестируется с использованием pytest.mark.parametrize, где
тестовые данные включают в себя различные списки транзакций и ожидаемые описания.

- test_card_number_generator(start, end, expected_cards):

Эта функция генерирует номера карт, начиная со стартового номера и заканчивая конечным номером. Она также тестируется с
использованием pytest.mark.parametrize, где тестовые данные включают в себя различные диапазоны номеров и ожидаемые
номера карт.
